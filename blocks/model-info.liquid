{%- liquid
    assign block_settings = block.settings
    assign model_info_reference = closest.product.metafields.models.model_info
    assign model_info = nil
  
    if model_info_reference and model_info_reference.value
      assign model_info = model_info_reference.value
    endif
  
    assign model_name = ''
    assign wearing_size = ''
  
    if model_info != nil
      assign model_name = model_info.model
      assign wearing_size = model_info.wearing_size
    endif
  
    assign has_content = false
    if model_name != blank or wearing_size != blank
      assign has_content = true
    endif
  -%}
  
  {% if has_content %}
    <div
      class="model-info-block spacing-style border-style"
      style="
        {% render 'spacing-style', settings: block_settings %}
        {% render 'border-override', settings: block_settings %}
        text-align: {{ block_settings.alignment }};
      "
      {{ block.shopify_attributes }}
    >
      {% if block_settings.heading != blank %}
        <p class="model-info-block__heading {{ block_settings.heading_style | default: 'heading' }}">
          {{ block_settings.heading }}
        </p>
      {% endif %}
  
      <dl class="model-info-block__list">
        {% if model_name != blank %}
          <div class="model-info-block__item">
            <dt class="model-info-block__term">
              {{ block_settings.model_label | default: 'Model' }}
            </dt>
            <dd class="model-info-block__definition">
              {{ model_name }}
            </dd>
          </div>
        {% endif %}
  
        {% if wearing_size != blank %}
          <div class="model-info-block__item">
            <dt class="model-info-block__term">
              {{ block_settings.size_label | default: 'Wearing size' }}
            </dt>
            <dd class="model-info-block__definition">
              {{ wearing_size }}
            </dd>
          </div>
        {% endif %}
      </dl>
    </div>
  {% elsif request.design_mode %}
    <div
      class="model-info-block model-info-block--placeholder spacing-style"
      style="
        {% render 'spacing-style', settings: block_settings %}
        text-align: {{ block_settings.alignment }};
      "
      {{ block.shopify_attributes }}
    >
      {% assign placeholder_heading = block_settings.heading | default: 'Model info' %}
      <p class="model-info-block__heading {{ block_settings.heading_style | default: 'heading' }}">
        {{ placeholder_heading }}
      </p>
      <p class="model-info-block__placeholder-note">
        Add a model info metaobject to this product to display data.
      </p>
    </div>
  {% endif %}
  
  {% stylesheet %}
    .model-info-block {
      display: grid;
      gap: var(--padding-sm, 12px);
    }
  
    .model-info-block__heading {
      margin: 0;
    }
  
    .model-info-block__list {
      margin: 0;
      display: grid;
      gap: var(--padding-xs, 8px);
    }
  
    .model-info-block__item {
      display: flex;
      gap: var(--padding-xs, 8px);
      align-items: baseline;
    }
  
    .model-info-block__term {
      font-weight: var(--font-paragraph--weight-bold, 600);
      margin: 0;
    }
  
    .model-info-block__definition {
      margin: 0;
    }
  
    .model-info-block--placeholder {
      border: 1px dashed rgb(var(--color-border-rgb, 0 0 0) / 0.2);
      border-radius: var(--radius-card, 8px);
    }
  
    .model-info-block__placeholder-note {
      margin: 0;
      font-size: min(0.9em, var(--font-paragraph--size));
      color: rgb(var(--color-foreground-rgb) / var(--opacity-subdued-text, 0.65));
    }
  {% endstylesheet %}
  
  {% schema %}
  {
    "name": "Model info",
    "tag": null,
    "settings": [
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Model info"
      },
      {
        "type": "select",
        "id": "heading_style",
        "label": "Heading style",
        "options": [
          {
            "value": "heading",
            "label": "Theme heading"
          },
          {
            "value": "subheading",
            "label": "Theme subheading"
          },
          {
            "value": "body",
            "label": "Body"
          }
        ],
        "default": "heading"
      },
      {
        "type": "text",
        "id": "model_label",
        "label": "Model label",
        "default": "Model"
      },
      {
        "type": "text",
        "id": "size_label",
        "label": "Size label",
        "default": "Wearing size"
      },
      {
        "type": "select",
        "id": "alignment",
        "label": "Text alignment",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "left"
      },
      {
        "type": "header",
        "content": "Appearance"
      },
      {
        "type": "select",
        "id": "border",
        "label": "Border",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "top",
            "label": "Top"
          },
          {
            "value": "bottom",
            "label": "Bottom"
          },
          {
            "value": "full",
            "label": "Outline"
          }
        ],
        "default": "none"
      },
      {
        "type": "range",
        "id": "border_width",
        "label": "Border width",
        "min": 1,
        "max": 10,
        "step": 1,
        "unit": "px",
        "default": 1,
        "visible_if": "{{ block.settings.border != 'none' }}"
      },
      {
        "type": "range",
        "id": "border_opacity",
        "label": "Border opacity",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "%",
        "default": 100,
        "visible_if": "{{ block.settings.border != 'none' }}"
      },
      {
        "type": "range",
        "id": "border_radius",
        "label": "Border radius",
        "min": 0,
        "max": 32,
        "step": 1,
        "unit": "px",
        "default": 8,
        "visible_if": "{{ block.settings.border == 'full' }}"
      },
      {
        "type": "header",
        "content": "Spacing"
      },
      {
        "type": "range",
        "id": "padding-block-start",
        "label": "Padding top",
        "min": 0,
        "max": 80,
        "step": 4,
        "unit": "px",
        "default": 16
      },
      {
        "type": "range",
        "id": "padding-block-end",
        "label": "Padding bottom",
        "min": 0,
        "max": 80,
        "step": 4,
        "unit": "px",
        "default": 16
      },
      {
        "type": "range",
        "id": "padding-inline-start",
        "label": "Padding left",
        "min": 0,
        "max": 80,
        "step": 4,
        "unit": "px",
        "default": 16
      },
      {
        "type": "range",
        "id": "padding-inline-end",
        "label": "Padding right",
        "min": 0,
        "max": 80,
        "step": 4,
        "unit": "px",
        "default": 16
      }
    ]
  }
  {% endschema %}
  
  